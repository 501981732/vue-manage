"use strict";window.onerror=function(){return !0};var vm=null;!function(){if(window.navigator.userAgent.indexOf("Chrome")<0){return tools.chromeSupport()}var e={isActive:0,tonight:[],total:[],rid:RID,weid:WEID,enlargeQrcode:!1,enlargeQrcodeSeconds:16,qrcodeImg:QRCODE_IMAGE,show:!1,textShow:!1,bpTextShow:!1,requestFlag:!0,number:-1,lasttime:-1,bpItems:[],max_msg_show:msg_display_num||10,dsShow:!1,paScreen:{id:"",weid:"",openid:"",content:"",nickname:"",avatar:"",sex:"",status:"",image:"",type:"bp",isshow:"",createtime:"",rid:"",topenid:"",toName:"",ms:60,tocontent:"",extend_params:"",forwho:"",send_nums:"",bp_time:"",hb_detail:"",fee:"",send_nums:"",paytid:""},daItems:{id:0,weid:0,openid:"",messageid:0,num:"",content:"",nickname:"",avatar:"",sex:1,status:0,image:"",type:"ds",isshow:1,createtime:1488352419,rid:10,topenid:"",toName:"",ms:60,tocontent:"emptyVideo",extend_params:"",forwho:"",send_nums:"",bp_time:"",hb_detail:"",fee:"",send_nums:"",paytid:""},randVideo:{emptyVideo:"","car":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/car.webm","dog":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/dog.webm","cucumber":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/cucumber.webm","bras":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/bras.webm","yh":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/yh.webm","rose":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/rose.webm","perfume":"../addons/meepo_xianchang/template/mobile/app/images/baping/images/bp/perfume.webm","金话筒":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_mic.mp4","比基尼":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_bigini.mp4","蓝玫瑰":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_blueRose.mp4","玫瑰花海":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_flowers.mp4","跑车":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_ferrari.mp4","人气流星雨":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_meteor.mp4","皇冠":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_crown.mp4","香水":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_perfume.mp4","洋酒":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_wine.mp4","游艇":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_yacht.mp4","生日蛋糕":"http://wemew.oss-cn-qingdao.aliyuncs.com/videos/ds/ds_cake.mp4"},emotionDataIndexs:{"[微笑]":1,"[撇嘴]":2,"[色]":3,"[发呆]":4,"[得意]":5,"[流泪]":6,"[害羞]":7,"[闭嘴]":8,"[睡]":9,"[大哭]":10,"[尴尬]":11,"[发怒]":12,"[调皮]":13,"[龇牙]":14,"[惊讶]":15,"[难过]":16,"[酷]":17,"[冷汗]":18,"[抓狂]":19,"[吐]":20,"[偷笑]":21,"[冷酷]":22,"[白眼]":23,"[傲慢]":24,"[饥饿]":25,"[困]":26,"[惊恐]":27,"[流汗]":28,"[憨笑]":29,"[大兵]":30,"[奋斗]":31,"[咒骂]":32,"[疑问]":33,"[嘘]":34},emotions:{"1":["[微笑]","../addons/meepo_xianchang/template/mobile/app/Face/1.png"],"2":["[撇嘴]","../addons/meepo_xianchang/template/mobile/app/Face/2.png"],"3":["[色]","../addons/meepo_xianchang/template/mobile/app/Face/3.png"],"4":["[发呆]","../addons/meepo_xianchang/template/mobile/app/Face/4.png"],"5":["[得意]","../addons/meepo_xianchang/template/mobile/app/Face/5.png"],"6":["[流泪]","../addons/meepo_xianchang/template/mobile/app/Face/6.png"],"7":["[害羞]","../addons/meepo_xianchang/template/mobile/app/Face/7.png"],"8":["[闭嘴]","../addons/meepo_xianchang/template/mobile/app/Face/8.png"],"9":["[睡]","../addons/meepo_xianchang/template/mobile/app/Face/9.png"],"10":["[大哭]","../addons/meepo_xianchang/template/mobile/app/Face/10.png"],"11":["[尴尬]","../addons/meepo_xianchang/template/mobile/app/Face/11.png"],"12":["[发怒]","../addons/meepo_xianchang/template/mobile/app/Face/12.png"],"13":["[调皮]","../addons/meepo_xianchang/template/mobile/app/Face/13.png"],"14":["[龇牙]","../addons/meepo_xianchang/template/mobile/app/Face/14.png"],"15":["[惊讶]","../addons/meepo_xianchang/template/mobile/app/Face/15.png"],"16":["[难过]","../addons/meepo_xianchang/template/mobile/app/Face/16.png"],"17":["[酷]","../addons/meepo_xianchang/template/mobile/app/Face/17.png"],"18":["[冷汗]","../addons/meepo_xianchang/template/mobile/app/Face/18.png"],"19":["[抓狂]","../addons/meepo_xianchang/template/mobile/app/Face/19.png"],"20":["[吐]","../addons/meepo_xianchang/template/mobile/app/Face/20.png"],"21":["[偷笑]","../addons/meepo_xianchang/template/mobile/app/Face/21.png"],"22":["[冷酷]","../addons/meepo_xianchang/template/mobile/app/Face/22.png"],"23":["[白眼]","../addons/meepo_xianchang/template/mobile/app/Face/23.png"],"24":["[傲慢]","../addons/meepo_xianchang/template/mobile/app/Face/24.png"],"25":["[饥饿]","../addons/meepo_xianchang/template/mobile/app/Face/25.png"],"26":["[困]","../addons/meepo_xianchang/template/mobile/app/Face/26.png"],"27":["[惊恐]","../addons/meepo_xianchang/template/mobile/app/Face/27.png"],"28":["[流汗]","../addons/meepo_xianchang/template/mobile/app/Face/28.png"],"29":["[憨笑]","../addons/meepo_xianchang/template/mobile/app/Face/29.png"],"30":["[大兵]","../addons/meepo_xianchang/template/mobile/app/Face/30.png"],"31":["[奋斗]","../addons/meepo_xianchang/template/mobile/app/Face/31.png"],"32":["[咒骂]","../addons/meepo_xianchang/template/mobile/app/Face/32.png"],"33":["[疑问]","../addons/meepo_xianchang/template/mobile/app/Face/33.png"],"34":["[嘘]","../addons/meepo_xianchang/template/mobile/app/Face/34.png"]},flag:!0,id:-1,len:0,deleteShow:!1,sexPath:"../addons/meepo_xianchang/template/mobile/app/app/newbar/sex000.png",items:[],penel:{gear:!1,shareLink:window.location.origin,index:0,defaultIndex:0,imgPath:"-1",bgCheckbox:!1,checkAll:!1,systemCheckbox:{clearCache:!1,recoveryDefault:!1,saveRefresh:!0,moveLeft:!1,chatChange:!1,paRight:!1},limitNumber:7,sexIndex:0,sexCheckbox:!1,sexPath:-1,qrcodeText:"扫一扫二维码上墙",menu:!1,toggle:0,speed:2.55,setItems:[{name:"背景图片设置",icon:"&#xe635;"},{name:"其他设置",icon:"&#xe6e6;"},{name:"系统设置",icon:"&#xe719;"}],bgItems:[{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/001.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/01.jpg",name:"DJ音乐女郎"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/002.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/02.jpg",name:"DJ音乐时尚美女"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/003.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/03.jpg",name:"放音乐的DJ师"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/004.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/04.jpg",name:"美女DJ师"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/005.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/05.jpg",name:"梦幻光斑与美女dj师"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/006.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/06.jpg",name:"旋转dj按钮"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/007.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/07.jpg",name:"英国DJ大师"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/008.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/08.jpg",name:"本分色情主题"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/009.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/09.jpg",name:"潮流彩色光斑"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0010.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/010.jpg",name:"足球小子"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0011.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/011.jpg",name:"动感色彩"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0012.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/012.jpg",name:"多边形炫彩"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0013.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/013.jpg",name:"花花世界"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0014.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/014.jpg",name:"简约色彩"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0015.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/015.jpg",name:"蓝色经典图案"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0016.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/016.jpg",name:"篮球小子"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0017.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/017.jpg",name:"炫酷色彩"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0018.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/018.jpg",name:"绚丽的彩色光斑"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0019.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/019.jpg",name:"音乐派对"},{bg:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/0020.jpg",thumbnail:"../addons/meepo_xianchang/template/mobile/app/newbar/bg/020.jpg",name:"音乐主题"}],sexItems:[{sex:"../addons/meepo_xianchang/template/mobile/app/newbar/sex000.png"},{sex:"../addons/meepo_xianchang/template/mobile/app/newbar/sex001.png"},{sex:"../addons/meepo_xianchang/template/mobile/app/newbar/sex002.png"},{sex:"../addons/meepo_xianchang/template/mobile/app/newbar/sex003.png"},{sex:"../addons/meepo_xianchang/template/mobile/app/newbar/sex004.png"},{sex:"../addons/meepo_xianchang/template/mobile/app/newbar/sex005.png"}]},confession:{show:!1,items:{content:"缘是美丽的邂逅，爱是心跳的感觉，情是心灵的交会，恋是甜蜜的思念，走在爱与被爱的边缘，你见或者不见，爱你的心始终不改变！",ms:60}}};
vm=new Vue({el:"#yiyu-container",data:function(){return e},created:function(){var e=this;jQuery.get("../app/index.php?i=4&c=entry&do=new_barinit&m=meepo_xianchang",{rid:e.rid},function(t,n){"success"==n&&(e.lasttime=t.lasttime)},"json")},methods:{autoToggle:function(){var e=this,t=function(){e.isActive++,e.isActive>1&&(e.isActive=0),setTimeout(t,10000)};t()},ranking:function(){var e=this,t=function(){setTimeout(t,15e3),jQuery.get("../app/index.php?i="+e.weid+"&c=entry&do=new_bartop&m=meepo_xianchang",{rid:e.rid,type:1},function(t,n){0==t.errno&&"success"==n&&(e.total=t.message.sort(function(e,t){return parseFloat(t.money)-parseFloat(e.money)}).filter(function(e){return"0.00"!=e.money?e:void 0}))},"json"),jQuery.get("../app/index.php?i="+e.weid+"&c=entry&do=new_bartop&m=meepo_xianchang",{rid:e.rid,type:0},function(t,n){0==t.errno&&"success"==n&&(e.tonight=t.message.sort(function(e,t){return parseFloat(t.money)-parseFloat(e.money)}).filter(function(e){return"0.00"!=e.money?e:void 0}))},"json"),$(".bg_video").length<1&&document.getElementById("yiyu-container").classList.toggle("jello")};t()},requestComment:function(){var e=this,t=function(){setTimeout(t,2222),0!=e.flag&&-1!=e.lasttime&&$.get("../app/index.php?i="+e.weid+"&c=entry&do=new_bargetmore2&m=meepo_xianchang",{lasttime:e.lasttime,show_max_id:e.id,rid:e.rid},function(t,n){t.delmsg.length>0&&e.deleteForever(t.delmsg);e.flag=!0,1==t.hadNew&&"success"==n?$.ajax({method:"GET",url:"../app/index.php?i="+e.weid+"&c=entry&do=new_bargetmorepoll&m=meepo_xianchang",dataType:"json",data:{lasttime:e.lasttime,show_max_id:e.id,rid:e.rid},success:function(t){var n=t.list,s=n.length-1;e.lasttime=t.lasttime;if(n.length<1){return}if(e.id!=n[s].id){if(-1==e.id){return e.id=n[s].id,e.items=n,void (e.len=s+1)}if(e.id!=n[s].id){for(var i=0;i<n.length;i++){e.items.push(n[i]),("bp"==n[i].type||"ds"==n[i].type)&&e.bpItems.push(n[i]),"dm"==n[i].type&&danmu.add([n[i]])}e.id=n[s].id,e.len=s+1}}},complete:function(){e.flag=!0}}):""},"json")};t()},loop:function(){var e=this,t=0,n=function(){e.penel.speed<0.7&&(e.penel.speed=0.7),setTimeout(n,1000*e.penel.speed);var s=document.getElementById("comment-box"),i=document.getElementById("comment-loop");i.offsetHeight<s.offsetHeight||(t=i.firstElementChild.offsetHeight+10,i.style.transition="transform .5s linear",i.style.transform="translate3d(0,"+-t+"px,0)",setTimeout(function(){e.items.shift(),e.items.length<(e.max_msg_show+1)&&e.items.push(e.items[0]),i.style.transition="none",i.style.transform="translate3d(0,0,0)"},550))};n()},compare:function(obj){return function(a,b){var value1=a[obj];var value2=b[obj];return value1-value2}},findarrElem:function(val){var t=this;for(var i=0;i<e.items.length;i++){if(e.items[i].id==val){return i}}return -1},newest:function(e){return new Date/1000-e<=120?{infinite:!0,active:!0}:null},linkBtn:function(e){1==e?(this.penel.shareLink=window.location.href,tools.layer("获取分享链接成功!")):2==e&&(document.getElementById("copy-link").select(),tools.layer(1==document.execCommand("Copy")?"复制链接成功,赶紧分享给小伙伴们吧 O(∩_∩)O~~":"复制链接失败 /(ㄒoㄒ)/~~"))},saveBtn:function(e){var t=this;switch(e){case 0:var n=document.getElementsByTagName("body")[0];if(-1!=t.penel.imgPath&&1==t.penel.bgCheckbox){var s=t.penel.imgPath;return window.localStorage.setItem("bgPath",s),n.style.backgroundImage="url("+s+")",void tools.confirm("保存成功是否返回大屏幕 ?",function(){t.penel.gear=!1})}var i=t.penel.bgItems[t.penel.defaultIndex].bg;window.localStorage.setItem("bgPath",i),n.style.backgroundImage="url("+i+")",tools.confirm("保存成功是否返回大屏幕 ?",function(){t.penel.gear=!1});break;case 1:1==t.penel.sexCheckbox&&-1!=t.penel.sexPath?(t.sexPath=t.penel.sexPath,window.localStorage.setItem("sex_logo",t.sexPath)):-1==t.penel.sexPath&&(t.sexPath=t.penel.sexItems[t.penel.sexIndex].sex,window.localStorage.setItem("sex_logo",t.sexPath)),"扫一扫二维码上墙"!=t.penel.qrcodeText&&window.localStorage.setItem("qrcode_text",t.penel.qrcodeText),tools.confirm("保存成功是否返回大屏幕 ?",function(){t.penel.gear=!1});break;case 2:1==t.penel.systemCheckbox.clearCache&&window.sessionStorage.setItem("clear_cache",1),1==t.penel.systemCheckbox.moveLeft&&window.localStorage.setItem("move_left",1),1==t.penel.systemCheckbox.chatChange&&window.localStorage.setItem("chat_change",1),1==t.penel.systemCheckbox.paRight&&window.localStorage.setItem("pa_right",1),1==t.penel.systemCheckbox.recoveryDefault&&window.localStorage.clear(),1==t.penel.systemCheckbox.saveRefresh&&window.location.reload(),tools.layer("保存设置成功，刷新就能看到效果啦!");break;case 4:if(0==t.requestFlag){return void tools.layer("当前已有用户霸屏或打赏, 请稍后在试")}var a=document.getElementById("nickname-1").value,o=document.getElementById("content-1").value,r=document.getElementById("seconds-1").value;if(a=a.length<1?"霸屏":a,o=o.length<1?"体验霸屏":o,r=1==isNaN(r)||""==r?30:r,0==t.penel.toggle){return t.penel.gear=!1,void setTimeout(function(){t.bpItems.push({id:"",weid:"",openid:"",messageid:"",num:"",content:o,nickname:a,avatar:"",sex:"",status:"",image:"",type:"bp",isshow:"",createtime:"",rid:"",topenid:"",toName:"",ms:r,tocontent:"",paytid:""})
},1000)}if(1==t.penel.toggle){var c=Object.keys(t.randVideo);c.shift(),t.penel.gear=!1,setTimeout(function(){t.bpItems.push({id:0,weid:0,openid:"",messageid:0,num:"",content:o,nickname:a,avatar:"",sex:1,status:0,image:"",type:"ds",isshow:1,createtime:1488352419,rid:10,topenid:"",toName:"",ms:r,tocontent:c[Math.ceil(Math.random()*c.length-1)],paytid:20170301151343383000})},1000)}break;default:tools.layer("保存失败,请联系管理员!")}},upload:function(e,t,n,s){var i=this,a=document.getElementById(e),o=document.getElementById(t),r=a.files[0];if("image/jpeg"==r.type||"image/png"==r.type){if(r.size<=s){var c=new FileReader;c.readAsDataURL(r),c.onload=function(t){var s=document.createElement("img");s.src=t.target.result,s.onload=function(){var t=s.naturalWidth,a=s.naturalHeight,r="image/jpeg";if("upload-sex"==e){if(100!=t){return void tools.layer("请上传100 * 50的图片")}if(50!=a){return void tools.layer("请上传100 * 50的图片")}r="image/png"}var c=document.createElement("canvas"),m=c.getContext("2d");c.width=t,c.height=a,m.drawImage(s,0,0,t,a,0,0,t,a);var l=c.toDataURL(r);o.src=l,i.penel[n]=l}}}else{tools.layer("只支持1MB以内的jpg,png格式图片,请重新上传!")}}else{tools.layer("只支持1MB以内的jpg,png格式图片,请重新上传!")}},testData:function(){var e=document.getElementsByTagName("body")[0];if($(".bg_video").length==0&&window.localStorage.getItem("bgPath")?e.style.backgroundImage="url("+window.localStorage.getItem("bgPath")+")":backgroundImg&&(e.style.backgroundImage="url("+backgroundImg+")"),window.localStorage.getItem("chat_change")&&document.getElementById("comment-box").classList.add("active"),window.localStorage.getItem("move_left")&&document.querySelectorAll(".main")[0].classList.add("active"),window.localStorage.getItem("sex_logo")&&(this.sexPath=window.localStorage.getItem("sex_logo")),window.localStorage.getItem("pa_right")&&document.querySelectorAll(".full-screen")[0].classList.add("active"),window.localStorage.getItem("qrcode_text")&&(this.penel.qrcodeText=window.localStorage.getItem("qrcode_text")),window.sessionStorage.getItem("clear_cache")){window.sessionStorage.removeItem("clear_cache");var t=window.location.href;window.location.href=-1!=t.indexOf("&uniqid=")?t.slice(0,t.indexOf("&uniqid=")+1)+"uniqid="+Math.random():t+"&uniqid="+Math.random()}},menuShow:function(){var e=this,t=document.querySelectorAll(".right-menu")[0],n=window.innerWidth;document.addEventListener("mousedown",function(s){var i=s||window.event,a=i.button,o=i.clientX,r=i.clientY,c=1*new Date;o>=n-150&&(o-=150),2==a?(t.style.top=r+"px",t.style.left=o+"px",e.penel.menu=!0):e.penel.menu=!1;var m=function(t){var n=t||window.event,s=n.clientX,i=(n.clientY,1*new Date);o>s+50&&150>=i-c&&0==e.penel.gear?e.penel.gear=!0:s-50>o&&150>=i-c&&1==e.penel.gear&&(e.penel.gear=!1),document.removeEventListener("mouseup",m,!1)};document.addEventListener("mouseup",m,!1)},!1)},menuBtn:function(e){switch(e){case 1:if(0==this.penel.gear){return void tools.layer("当前已处于大屏幕")}this.penel.gear=!1,this.penel.menu=!1;break;case 2:$(".menus").hide();if(1==this.penel.gear){return void tools.layer("当前已处于控制面板")}this.penel.gear=!0,this.penel.menu=!1;break;case 3:window.location.reload();break;case 4:var t=document.documentElement;if($(t).find(".bg_video").length>0){$(t).find(".bg_video").css("z-index","1")}t.webkitRequestFullscreen?(t.webkitRequestFullscreen(),this.penel.menu=!1):tools.layer("当前浏览器不支持,请手动按F11");break;case 5:var t=document.documentElement;if($(t).find(".bg_video").length>0){$(t).find(".bg_video").css("z-index","-1")}document.webkitCancelFullScreen?(document.webkitCancelFullScreen(),this.penel.menu=!1):tools.layer("当前浏览器不支持,请手动按F11");break;case 6:window.open(this.qrcodeImg),this.penel.menu=!1;break;default:this.penel.menu=!1}},show_menus:function(){var t=this;t.penel.gear=0;$(".menus").slideDown()},close_menus:function(){$(".menus").slideUp()},show_penel:function(){this.penel.gear=1;$(".menus").slideUp()},close_penel:function(){this.penel.gear=0},deleteTrash:function(e){var t=this,n=this.items[e].createtime;tools.confirm("确定要临时删除吗?",function(){t.items[e].createtime&&(n==t.items[e].createtime?(t.items.splice(e,1),tools.layer("删除成功！")):tools.layer("删除失败,请重试！"))})},deleteForever:function(delmsg){var t=this;if(delmsg.length>0){for(var di=0;di<delmsg.length;di++){var arrkey=t.findarrElem(delmsg[di]);if(arrkey!=-1){t.items.splice(arrkey,1)}}}},bgvideo:function(){if($(".bg_video").length>0){$(".bg_video").css({width:$("body").width()+2,height:"auto",opacity:1})}},drag:function(e){var t=e||window.event,n=e.currentTarget,s=t.clientX-n.offsetLeft,i=t.clientY-n.offsetTop,a=function(e){var t=e||window.event;t.clientX-s,t.clientY-i};document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",a,!1)},!1)}},watch:{bpItems:function(){var e=this;if(1==e.requestFlag&&e.bpItems.length>0){switch(e.bpItems[0].type){case"bp":e.requestFlag=!1,e.paScreen=e.bpItems[0],e.show=!0,e.bpItems.shift();break;case"ds":e.requestFlag=!1,e.daItems=e.bpItems[0],e.dsShow=!0,e.bpItems.shift();
break;default:e.bpItems.shift()}}},show:function(e){var t=this,n=null;if(1==e){var s=this.paScreen.bp_time;""!=t.paScreen.image&&(document.querySelectorAll(".richLeft")[0].innerHTML=(""==t.paScreen.extend_params?'<img type="rich" auto="2" class="richLeftBg" style="width: 100%; height: auto; left: 0; top: -42.5px; visibility: visible;"  onload="tools.image3d(this)" src="'+t.paScreen.image+'">':""));""!=t.paScreen.extend_params&&(document.querySelectorAll(".bpvideo-box")[0].innerHTML='<video autoplay="autoplay" loop="loop" muted="muted" src="'+t.paScreen.extend_params.video+'"></video>');var i=function(){n=setTimeout(i,1000),t.paScreen.bp_time--,t.paScreen.bp_time<=0&&(t.show=!1,t.requestFlag=!0,t.bpTextShow=!1,t.paScreen.bp_time=s,setTimeout(function(){t.bpItems.length>0&&t.$set(t.bpItems[0],"token",Math.random()),$("#bp_music").length>0&&$("#bp_music")[0].pause()},888),clearTimeout(n))};setTimeout(i,1000),setTimeout(function(){t.bpTextShow=!0,$("#bp_music").length>0&&$("#bp_music")[0].play()},999)}},dsShow:function(e){var t=this,n=null;if(1==e){var s=this.daItems.bp_time,i=function(){n=setTimeout(i,1000),t.daItems.bp_time--,t.daItems.bp_time<=0&&(t.dsShow=!1,t.requestFlag=!0,t.textShow=!1,t.daItems.bp_time=s,clearTimeout(n),setTimeout(function(){t.bpItems.length>0&&t.$set(t.bpItems[0],"token",Math.random())},888))};setTimeout(i,1000),setTimeout(function(){t.textShow=!0},999)}},"confession.show":function(e){var t=this,n=0,s=null,i=!1;if(1==e){var a=this.confession.items.content,o=function(){return n++,n>a.length?void clearTimeout(s):(0==i?(t.confession.items.content=a.slice(0,n)+"_",i=!0):(t.confession.items.content=a.slice(0,n),i=!1),void (s=setTimeout(o,100)))};o()}},"penel.checkAll":function(e){if(1==e){for(var t in this.penel.systemCheckbox){this.penel.systemCheckbox[t]=!0}}else{for(var n in this.penel.systemCheckbox){this.penel.systemCheckbox[n]=!1}}},"penel.systemCheckbox.chatChange":function(e){var t=document.getElementById("comment-box");return 1==e?t.classList.add("active"):t.classList.remove("active")},"penel.systemCheckbox.moveLeft":function(e){var t=document.querySelectorAll(".main")[0];return 1==e?t.classList.add("active"):t.classList.remove("active")},"penel.systemCheckbox.paRight":function(e){var t=document.querySelectorAll(".full-screen")[0];return 1==e?t.classList.add("active"):t.classList.remove("active")},enlargeQrcode:function(e){var t=this,n=null,s=t.enlargeQrcodeSeconds;if(1==e){var i=function(){return t.enlargeQrcodeSeconds--,t.enlargeQrcodeSeconds<=0?(t.enlargeQrcode=!1,t.enlargeQrcodeSeconds=s,void clearTimeout(n)):void (n=setTimeout(i,1000))};i()}}},filters:{formatDate:function(e){var t=1000*parseInt(e),n=new Date(t),s=n.getFullYear()+"-",i=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",a=n.getDate()<10?"0"+n.getDate()+" ":n.getDate()+" ",o=n.getHours()<10?"0"+n.getHours()+":":n.getHours()+":",r=n.getMinutes()<10?"0"+n.getMinutes()+":":n.getMinutes()+":",c=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return s+i+a+o+r+c},content2emo:function(v){var emotions=e.emotions;var emotionDataIndexs=e.emotionDataIndexs;var pattern2=/\[[\u4e00-\u9fa5]+\]/g;return v.replace(pattern2,function(match){return'<img style="clear: both;width:50px;" src="'+emotions[emotionDataIndexs[match]][1]+'" class="smallface_img" />'})}},computed:{computedBgItems:function(){return this.penel.bgItems.slice(0,this.penel.limitNumber)}},components:{"my-title":{props:["title"],template:'<div class="sy-left" v-html="title"></div>'}},mounted:function(){var e=this;this.bgvideo(),this.ranking(),this.autoToggle(),this.requestComment(),this.loop(),this.testData(),this.menuShow();var t=null;t=setInterval(function(){clearInterval(t),tools.removeEl(document.querySelectorAll(".loading")[0])},2000)}}),jQuery(function(){var e={bgCanvas:function(){var e=document.getElementById("yiyu-container"),t=document.createElement("canvas");t.id="canv",e.appendChild(t);var n=99,s=window.innerWidth,i=window.innerHeight,a=0,o=0,r=150,c=function(e){return e*Math.PI/180},m=function(){return Math.sin(Math.floor(360*Math.random())*Math.PI/180)},l={obj:{x:a,y:o,z:r},dest:{x:0,y:0,z:1},dist:{x:0,y:0,z:200},ang:{cplane:0,splane:0,ctheta:0,stheta:0},zoom:1,disp:{x:s/2,y:i/2,z:0},upd:function(){l.dist.x=l.dest.x-l.obj.x,l.dist.y=l.dest.y-l.obj.y,l.dist.z=l.dest.z-l.obj.z,l.ang.cplane=-l.dist.z/Math.sqrt(l.dist.x*l.dist.x+l.dist.z*l.dist.z),l.ang.splane=l.dist.x/Math.sqrt(l.dist.x*l.dist.x+l.dist.z*l.dist.z),l.ang.ctheta=Math.sqrt(l.dist.x*l.dist.x+l.dist.z*l.dist.z)/Math.sqrt(l.dist.x*l.dist.x+l.dist.y*l.dist.y+l.dist.z*l.dist.z),l.ang.stheta=-l.dist.y/Math.sqrt(l.dist.x*l.dist.x+l.dist.y*l.dist.y+l.dist.z*l.dist.z)}},d={parts:{sz:function(e,t){return{x:e.x*t.x,y:e.y*t.y,z:e.z*t.z}},rot:{x:function(e,t){return{x:e.x,y:e.y*Math.cos(c(t.x))-e.z*Math.sin(c(t.x)),z:e.y*Math.sin(c(t.x))+e.z*Math.cos(c(t.x))}},y:function(e,t){return{x:e.x*Math.cos(c(t.y))+e.z*Math.sin(c(t.y)),y:e.y,z:-e.x*Math.sin(c(t.y))+e.z*Math.cos(c(t.y))}},z:function(e,t){return{x:e.x*Math.cos(c(t.z))-e.y*Math.sin(c(t.z)),y:e.x*Math.sin(c(t.z))+e.y*Math.cos(c(t.z)),z:e.z}
}},pos:function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}},pov:{plane:function(e){return{x:e.x*l.ang.cplane+e.z*l.ang.splane,y:e.y,z:e.x*-l.ang.splane+e.z*l.ang.cplane}},theta:function(e){return{x:e.x,y:e.y*l.ang.ctheta-e.z*l.ang.stheta,z:e.y*l.ang.stheta+e.z*l.ang.ctheta}},set:function(e){return{x:e.x-l.obj.x,y:e.y-l.obj.y,z:e.z-l.obj.z}}},persp:function(e){return{x:e.x*l.dist.z/e.z*l.zoom,y:e.y*l.dist.z/e.z*l.zoom,z:e.z*l.zoom,p:l.dist.z/e.z}},disp:function(e,t){return{x:e.x+t.x,y:-e.y+t.y,z:e.z+t.z,p:e.p}},steps:function(e,t,n,s,i){var a=d.parts.sz(e,t);return a=d.parts.rot.x(a,n),a=d.parts.rot.y(a,n),a=d.parts.rot.z(a,n),a=d.parts.pos(a,s),a=d.pov.plane(a),a=d.pov.theta(a),a=d.pov.set(a),a=d.persp(a),a=d.disp(a,i)}};!function(){var e=function(e){this.transIn={},this.transOut={},this.transIn.vtx=e.vtx,this.transIn.sz=e.sz,this.transIn.rot=e.rot,this.transIn.pos=e.pos};e.prototype.vupd=function(){this.transOut=d.steps(this.transIn.vtx,this.transIn.sz,this.transIn.rot,this.transIn.pos,l.disp)};var t=function(){this.vel=0.04,this.lim=360,this.diff=200,this.initPos=100,this.toX=a,this.toY=o,this.go()};t.prototype.go=function(){this.canvas=document.getElementById("canv"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.$=canv.getContext("2d"),this.$.globalCompositeOperation="source-over",this.varr=[],this.dist=[],this.calc=[];for(var e=0,t=n;t>e;e++){this.add()}this.rotObj={x:0,y:0,z:0},this.objSz={x:s/5,y:i/5,z:s/5}},t.prototype.add=function(){this.varr.push(new e({vtx:{x:m(),y:m(),z:m()},sz:{x:0,y:0,z:0},rot:{x:20,y:-20,z:0},pos:{x:this.diff*Math.sin(360*Math.random()*Math.PI/180),y:this.diff*Math.sin(360*Math.random()*Math.PI/180),z:this.diff*Math.sin(360*Math.random()*Math.PI/180)}})),this.calc.push({x:360*Math.random(),y:360*Math.random(),z:360*Math.random()})},t.prototype.upd=function(){l.obj.x+=0.05*(this.toX-l.obj.x),l.obj.y+=0.05*(this.toY-l.obj.y)},t.prototype.draw=function(){this.$.clearRect(0,0,this.canvas.width,this.canvas.height),l.upd(),this.rotObj.x+=0.1,this.rotObj.y+=0.1,this.rotObj.z+=0.1;for(var e=0;e<this.varr.length;e++){for(var t in this.calc[e]){this.calc[e].hasOwnProperty(t)&&(this.calc[e][t]+=this.vel,this.calc[e][t]>this.lim&&(this.calc[e][t]=0))}if(this.varr[e].transIn.pos={x:this.diff*Math.cos(this.calc[e].x*Math.PI/180),y:this.diff*Math.sin(this.calc[e].y*Math.PI/180),z:this.diff*Math.sin(this.calc[e].z*Math.PI/180)},this.varr[e].transIn.rot=this.rotObj,this.varr[e].transIn.sz=this.objSz,this.varr[e].vupd(),!(this.varr[e].transOut.p<0)){var n=this.$.createRadialGradient(this.varr[e].transOut.x,this.varr[e].transOut.y,this.varr[e].transOut.p,this.varr[e].transOut.x,this.varr[e].transOut.y,2*this.varr[e].transOut.p);this.$.globalCompositeOperation="lighter",n.addColorStop(0,"hsla(255, 255%, 255%, 1)"),n.addColorStop(0.5,"hsla("+(e+2)+",85%, 40%,1)"),n.addColorStop(1,"hsla("+e+",85%, 40%,.5)"),this.$.fillStyle=n,this.$.beginPath(),this.$.arc(this.varr[e].transOut.x,this.varr[e].transOut.y,2.2*this.varr[e].transOut.p,0,2*Math.PI,!1),this.$.fill(),this.$.closePath()}}},t.prototype.anim=function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||function(e){window.setTimeout(e,1000/60)}}();var e=function(){this.upd(),this.draw(),window.requestAnimationFrame(e)}.bind(this);window.requestAnimationFrame(e)},t.prototype.run=function(){this.anim()};var r=new t;r.run()}()}};for(var t in e){"function"==typeof e[t]&&e[t]()}})}();